# Agent 3: SVG Renderer - Visual Guide

## ğŸ¨ Component Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TimelinePlayer                             â”‚
â”‚                      (Agent 1 - Orchestrator)                   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ Audio Element  â”‚â”€â”€â”€â”€ currentTime â”€â”€â”€â”                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚                       â”‚
â”‚         â”‚                               â†“                       â”‚
â”‚         â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚         â”‚                    â”‚ useTimelineEngine    â”‚          â”‚
â”‚         â”‚                    â”‚ (Agent 2)            â”‚          â”‚
â”‚         â”‚                    â”‚                      â”‚          â”‚
â”‚         â”‚                    â”‚ Input:               â”‚          â”‚
â”‚         â”‚                    â”‚  - timelineEvents[]  â”‚          â”‚
â”‚         â”‚                    â”‚  - currentTime       â”‚          â”‚
â”‚         â”‚                    â”‚  - isPlaying         â”‚          â”‚
â”‚         â”‚                    â”‚                      â”‚          â”‚
â”‚         â”‚                    â”‚ Calculates:          â”‚          â”‚
â”‚         â”‚                    â”‚  - phase             â”‚          â”‚
â”‚         â”‚                    â”‚  - opacity           â”‚          â”‚
â”‚         â”‚                    â”‚  - transform         â”‚          â”‚
â”‚         â”‚                    â”‚  - visible           â”‚          â”‚
â”‚         â”‚                    â”‚                      â”‚          â”‚
â”‚         â”‚                    â”‚ Output:              â”‚          â”‚
â”‚         â”‚                    â”‚  - layerStates[]     â”‚          â”‚
â”‚         â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                               â”‚                       â”‚
â”‚         â”‚                               â†“                       â”‚
â”‚         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    SVGCanvas               â”‚          â”‚
â”‚                        â”‚    (Agent 3 Main)          â”‚          â”‚
â”‚                        â”‚                            â”‚          â”‚
â”‚                        â”‚  Props:                    â”‚          â”‚
â”‚                        â”‚   - imageUrl               â”‚          â”‚
â”‚                        â”‚   - timelineEvents[]       â”‚          â”‚
â”‚                        â”‚   - layerStates[]          â”‚          â”‚
â”‚                        â”‚   - canvasDimensions       â”‚          â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                     â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚            SVG Rendering                â”‚
            â”‚                                         â”‚
            â”‚  <svg viewBox="0 0 800 600">           â”‚
            â”‚    <image href={imageUrl} />           â”‚
            â”‚                                         â”‚
            â”‚    {timelineEvents.map(event => {      â”‚
            â”‚      const layerState = ...            â”‚
            â”‚      if (!layerState.visible) return;  â”‚
            â”‚                                         â”‚
            â”‚      return <SVGElement               â”‚
            â”‚                event={event}            â”‚
            â”‚                layerState={layerState}  â”‚
            â”‚              />                         â”‚
            â”‚    })}                                  â”‚
            â”‚  </svg>                                 â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         SVGElement (Router)                   â”‚
        â”‚                                               â”‚
        â”‚  switch (event.elementType) {                 â”‚
        â”‚    case 'shape':                              â”‚
        â”‚      switch (event.shapeType) {               â”‚
        â”‚        case 'circle':    â†’ SVGCircle          â”‚
        â”‚        case 'rectangle': â†’ SVGRectangle       â”‚
        â”‚      }                                         â”‚
        â”‚    case 'line':   â†’ SVGLine                   â”‚
        â”‚    case 'arrow':  â†’ SVGArrow                  â”‚
        â”‚    case 'text':   â†’ SVGText                   â”‚
        â”‚  }                                             â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚     â”‚     â”‚      â”‚      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚      â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚     â”‚      â”‚               â”‚
    â†“              â†“     â†“      â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Circle â”‚   â”‚Rectangle â”‚  â”‚ Line  â”‚   â”‚  Arrow  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚        â”‚   â”‚          â”‚  â”‚       â”‚   â”‚         â”‚   â”‚ Text â”‚
â”‚ <circleâ”‚   â”‚  <rect   â”‚  â”‚<line  â”‚   â”‚<g>      â”‚   â”‚      â”‚
â”‚   cx   â”‚   â”‚    x     â”‚  â”‚  x1   â”‚   â”‚ <line/> â”‚   â”‚<text â”‚
â”‚   cy   â”‚   â”‚    y     â”‚  â”‚  y1   â”‚   â”‚ <poly/> â”‚   â”‚  x   â”‚
â”‚   r    â”‚   â”‚  width   â”‚  â”‚  x2   â”‚   â”‚</g>     â”‚   â”‚  y   â”‚
â”‚  fill  â”‚   â”‚  height  â”‚  â”‚  y2   â”‚   â”‚         â”‚   â”‚ />   â”‚
â”‚opacity â”‚   â”‚  fill    â”‚  â”‚stroke â”‚   â”‚opacity  â”‚   â”‚      â”‚
â”‚transform   â”‚ opacity  â”‚  â”‚opacityâ”‚   â”‚transformâ”‚   â”‚opacity
â”‚/>      â”‚   â”‚transform â”‚  â”‚transf.â”‚   â”‚/>       â”‚   â”‚transf.
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚/>        â”‚  â”‚/>     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Animation Phase Lifecycle

```
TIME: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’

        startTime      entryEnd       exitStart      endTime
           â†“              â†“               â†“            â†“
      â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€
           â”‚              â”‚               â”‚            â”‚
  HIDDEN   â”‚   ENTERING   â”‚   VISIBLE     â”‚  EXITING   â”‚  EXITED
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  opacity=0â”‚ opacity:0â†’1  â”‚  opacity=1    â”‚opacity:1â†’0 â”‚opacity=0
  visible= â”‚ visible=true â”‚  visible=true â”‚visible=trueâ”‚visible=
  false    â”‚              â”‚               â”‚            â”‚false
           â”‚              â”‚               â”‚            â”‚
  Not      â”‚ Animating In â”‚  Fully        â”‚ Animating  â”‚ Not
  Rendered â”‚              â”‚  Visible      â”‚ Out        â”‚ Rendered


Progress: 0.0   0.0â†’1.0      1.0           1.0â†’0.0      0.0
          â–¼      â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼   â–¼             â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼    â–¼
```

---

## ğŸ“Š LayerState Transformation Examples

### Fade Animation

```
ENTERING (opacity only)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  opacity: 0     â”‚ â†’ 0.25 â†’ 0.5 â†’ 0.75 â†’ 1.0
â”‚  transform: ""  â”‚
â”‚  visible: true  â”‚     Element gradually appears
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Scale Animation

```
ENTERING (scale from center)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  opacity: 1             â”‚
â”‚  transform: "scale(0)"  â”‚ â†’ scale(0.25) â†’ scale(0.5) â†’ scale(1)
â”‚  visible: true          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Visual:
  â€¢  â†’  â—  â†’  â¬¤  â†’  â¬¤
 tiny   small  med   full
```

### Slide Right Animation

```
ENTERING (slide from left)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  opacity: 1                     â”‚
â”‚  transform: "translateX(-50px)" â”‚ â†’ translateX(-25px) â†’ translateX(0)
â”‚  visible: true                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Visual:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â—â†’    â—â†’   â—  â”‚  Element slides in from left
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Wipe Horizontal Animation

```
ENTERING (reveal left to right)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  opacity: 1             â”‚
â”‚  transform: "scaleX(0)" â”‚ â†’ scaleX(0.5) â†’ scaleX(1)
â”‚  visible: true          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Visual:
â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚â–Œ     â”‚ â†’ â”‚â–ˆâ–ˆâ–ˆ   â”‚ â†’ â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚  Rectangle reveals left to right
â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Transform-Box Fix Visualization

### âŒ WITHOUT transform-box: fill-box (BROKEN)

```
SVG ViewBox (0,0) is origin for all transforms
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ (0,0)                          â”‚
    â”‚   *                            â”‚  * = Transform origin
    â”‚                                â”‚
    â”‚            â—                   â”‚  â— = Circle
    â”‚         (400,300)              â”‚
    â”‚                                â”‚
    â”‚                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

When scale(0.5) is applied:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ (0,0)                          â”‚
    â”‚   *                            â”‚  Circle scales toward (0,0)
    â”‚                                â”‚  WRONG! ğŸ˜
    â”‚      â—                         â”‚
    â”‚   (200,150)                    â”‚
    â”‚                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âœ… WITH transform-box: fill-box (CORRECT)

```
Circle's center is origin for transforms
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ (0,0)                          â”‚
    â”‚                                â”‚
    â”‚                                â”‚
    â”‚            â—                   â”‚  â— = Circle with center at (400,300)
    â”‚         (400,300)              â”‚  * = Transform origin (circle center)
    â”‚            *                   â”‚
    â”‚                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

When scale(0.5) is applied:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ (0,0)                          â”‚
    â”‚                                â”‚
    â”‚                                â”‚
    â”‚            â—                   â”‚  Circle scales from its center
    â”‚         (400,300)              â”‚  CORRECT! âœ“
    â”‚            *                   â”‚
    â”‚                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ ViewBox Scaling Visualization

```
Editor/Design Canvas (800Ã—600)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚   â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—              â”‚  Events positioned
â”‚   â”‚                     â”‚              â”‚  using percentages
â”‚   â”‚    â–²  Text          â”‚              â”‚  (0-100)
â”‚   â”‚    â”‚                â”‚              â”‚
â”‚   â”‚    â”‚                â”‚              â”‚
â”‚   â—â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—              â”‚
â”‚        â”‚                               â”‚
â”‚        Arrow                           â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         viewBox="0 0 800 600"

             â†“ SVG automatically scales â†“

Small Container (400px)              Large Container (1600px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  â”‚                 â”‚                                        â”‚
â”‚ â—â”€â”€â”€â”€â”€â”€â”€â—        â”‚                 â”‚   â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—             â”‚
â”‚ â”‚   â–²   â”‚        â”‚                 â”‚   â”‚                      â”‚             â”‚
â”‚ â”‚   â”‚   â”‚        â”‚                 â”‚   â”‚         â–²            â”‚             â”‚
â”‚ â—â”€â”€â”€â”¼â”€â”€â”€â—        â”‚                 â”‚   â”‚         â”‚   Text     â”‚             â”‚
â”‚     â”‚            â”‚                 â”‚   â”‚         â”‚            â”‚             â”‚
â”‚   Arrow          â”‚                 â”‚   â”‚         â”‚            â”‚             â”‚
â”‚                  â”‚                 â”‚   â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚             â”‚                          â”‚
  Scale: 0.5x                        â”‚           Arrow                        â”‚
                                     â”‚                                        â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       Scale: 2x

No code changes needed - SVG handles everything! âœ¨
```

---

## ğŸ”§ Coordinate Conversion Example

```
Event Definition (Percentage):
{
  position: { x: 50, y: 50 },  // Center of canvas
  elementType: 'shape',
  shapeType: 'circle',
  dimensions: { width: 10 }     // 10% of canvas width
}

Canvas Dimensions:
{ width: 800, height: 600 }

Conversion:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ percentToPixels(50, 50, {800, 600}) â”‚
â”‚                                      â”‚
â”‚ x = (50 / 100) * 800 = 400px        â”‚
â”‚ y = (50 / 100) * 600 = 300px        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Radius:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ diameter = (10 / 100) * 800 = 80px  â”‚
â”‚ radius = 80 / 2 = 40px               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Final SVG:
<circle
  cx="400"
  cy="300"
  r="40"
  fill="#00A689"
/>

Result in ViewBox:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚                                        â”‚
â”‚                                        â”‚
â”‚                  â—                     â”‚  Perfectly centered!
â”‚              (400, 300)                â”‚
â”‚                                        â”‚
â”‚                                        â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    viewBox="0 0 800 600"
```

---

## ğŸ¬ Arrow Rendering Example

```
Event:
{
  lineCoordinates: { x1: 20, y1: 50, x2: 80, y2: 50 },
  color: '#212b58',
  thickness: 2
}

Step 1: Convert to pixels
start = (160, 300)
end = (640, 300)

Step 2: Calculate angle
dx = 640 - 160 = 480
dy = 300 - 300 = 0
angle = atan2(0, 480) = 0Â° (pointing right)

Step 3: Render
<g opacity={layerState.opacity} transform={layerState.transform}>
  <!-- Arrow shaft -->
  <line x1="160" y1="300" x2="640" y2="300" stroke="#212b58" strokeWidth="2" />

  <!-- Arrowhead (rotated 0Â°) -->
  <polygon
    points="-10,-5 0,0 -10,5"
    fill="#212b58"
    transform="translate(640, 300) rotate(0)"
  />
</g>

Result:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    â”‚  Horizontal arrow
â”‚                                        â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

For a 45Â° angle arrow:
angle = atan2(300, 300) = 45Â°

Result:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚  \                                     â”‚
â”‚   \                                    â”‚
â”‚    \                                   â”‚
â”‚     \                                  â”‚
â”‚      â•²                                 â”‚
â”‚       â–¼                                â”‚  Diagonal arrow
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Element Centering Strategies

### Circle (Easy!)
```
<circle cx={centerX} cy={centerY} r={radius} />

cx, cy are already the center â†’ No offset needed! âœ“
```

### Rectangle (Needs Offset)
```
<rect x={x} y={y} width={w} height={h} />

x, y are top-left corner â†’ Need to offset:
x = centerX - width/2
y = centerY - height/2
```

### Text (Use Anchors)
```
<text
  x={centerX}
  y={centerY}
  textAnchor="middle"           â† Centers horizontally
  dominantBaseline="middle"     â† Centers vertically
>
  Content
</text>

Text automatically centers on (x, y) âœ“
```

### Line (No Centering)
```
<line x1={x1} y1={y1} x2={x2} y2={y2} />

Lines don't have a "center" - they connect two points directly.
```

---

## ğŸ¨ Color & Style Reference

```
Element Type      Default Color    Hex        RGB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Circle/Rectangle  Teal            #00A689    0, 166, 137
Line/Arrow        Dark Blue       #212b58    33, 43, 88
Text              Dark Gray       #333F48    51, 63, 72

Font: Poppins, sans-serif
Font Size: 16px (default)
Line Thickness: 2px (default)
Border Radius: 4px (rectangles)
```

---

## ğŸ§ª Visual Testing Guide

### 1. Static Elements
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚    â—  Circle                           â”‚
â”‚                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”  Rectangle                    â”‚
â”‚   â””â”€â”€â”€â”€â”˜                               â”‚
â”‚                                        â”‚
â”‚   â”€â”€â”€â”€â”€â–º  Arrow                        â”‚
â”‚                                        â”‚
â”‚   Text Element                         â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Check:
âœ“ Elements appear at correct positions
âœ“ Colors match event configuration
âœ“ Sizes are proportional
```

### 2. Fade Animation
```
Frame 1      Frame 2      Frame 3      Frame 4
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚      â”‚    â”‚      â”‚    â”‚      â”‚    â”‚      â”‚
â”‚  â–‘   â”‚ â†’ â”‚  â–’   â”‚ â†’ â”‚  â–“   â”‚ â†’ â”‚  â—   â”‚
â”‚      â”‚    â”‚      â”‚    â”‚      â”‚    â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜
opacity=0    opacity=0.3  opacity=0.7  opacity=1

Check:
âœ“ Element gradually appears
âœ“ No position changes
```

### 3. Scale Animation
```
Frame 1      Frame 2      Frame 3      Frame 4
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚      â”‚    â”‚      â”‚    â”‚      â”‚    â”‚      â”‚
â”‚  â€¢   â”‚ â†’ â”‚  â—   â”‚ â†’ â”‚  â¬¤   â”‚ â†’ â”‚  â¬¤   â”‚
â”‚      â”‚    â”‚      â”‚    â”‚      â”‚    â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜
scale=0.1    scale=0.4    scale=0.7    scale=1

Check:
âœ“ Element scales from center (not corner!)
âœ“ Position stays fixed
```

### 4. Slide Animation
```
Frame 1      Frame 2      Frame 3      Frame 4
â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚â—     â”‚ â†’ â”‚ â—    â”‚ â†’ â”‚  â—   â”‚ â†’ â”‚   â—  â”‚
â”‚      â”‚    â”‚      â”‚    â”‚      â”‚    â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜
x=-50        x=-30        x=-10        x=0

Check:
âœ“ Element moves smoothly
âœ“ Direction matches configuration
```

---

## ğŸ“Š Performance Visualization

```
Element Count vs Frame Rate

60fps â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚ Ideal
50fps â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚
40fps â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ          â”‚ Acceptable
30fps â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                    â”‚ Noticeable
20fps â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                          â”‚ Janky
10fps â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚ â–ˆâ–ˆ                              â”‚ Unusable
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        0   20   40   60   80  100+
               Element Count

Recommendation: Keep < 50 elements for smooth performance
```

---

## ğŸ¯ Integration Flowchart

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Start Integration   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Import       â”‚
    â”‚ SVGCanvas    â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Get layerStates  â”‚
    â”‚ from Agent 2     â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     No
    â”‚ layerStates      â”œâ”€â”€â”€â”€â”€â”€â†’ Fix Agent 2
    â”‚ available?       â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ Yes
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Pass to          â”‚
    â”‚ SVGCanvas        â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Test in Chrome   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     No
    â”‚ Transforms       â”œâ”€â”€â”€â”€â”€â”€â†’ Check transform-box
    â”‚ centered?        â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ Yes
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     No
    â”‚ Responsive       â”œâ”€â”€â”€â”€â”€â”€â†’ Check viewBox
    â”‚ scaling works?   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“ Yes
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Remove Konva     â”‚
    â”‚ dependencies     â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Success! ğŸ‰      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**End of Visual Guide**

For detailed implementation, see:
- `AGENT_3_SVG_RENDERER_IMPLEMENTATION.md`
- `AGENT_3_COMPONENT_HIERARCHY.md`
- `AGENT_3_QUICK_REFERENCE.md`

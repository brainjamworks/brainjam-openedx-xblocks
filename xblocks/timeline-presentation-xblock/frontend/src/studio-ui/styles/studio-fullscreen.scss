/**
 * Studio Fullscreen Modal Styles
 *
 * Beautiful, professional design for 98vh × 98vw modal
 * Liverpool design tokens and modern UI patterns
 */

// ============================================================================
// LIVERPOOL DESIGN TOKENS
// ============================================================================

$liverpool-blue: #212b58;
$liverpool-blue-light: #9BA4C5;
$liverpool-teal: #00A689;
$liverpool-pink: #EF426F;
$liverpool-sky-blue: #009CDD;

$liverpool-neutral-white: #ffffff;
$liverpool-neutral-50: #F8F9FA;
$liverpool-neutral-100: #E8EAEF;
$liverpool-neutral-200: #DBDBD3;
$liverpool-neutral-500: #8d9695;
$liverpool-neutral-600: #6c757d;
$liverpool-neutral-900: #333f48;

$liverpool-shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.08);
$liverpool-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.12);
$liverpool-shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.16);
$liverpool-shadow-xl: 0 24px 48px rgba(0, 0, 0, 0.22);

$liverpool-radius-sm: 8px;
$liverpool-radius-md: 12px;
$liverpool-radius-lg: 16px;
$liverpool-radius-xl: 20px;

$liverpool-space-1: 4px;
$liverpool-space-2: 8px;
$liverpool-space-3: 12px;
$liverpool-space-4: 16px;
$liverpool-space-6: 24px;
$liverpool-space-8: 32px;

// ============================================================================
// MODAL CONTAINER
// ============================================================================

.modal-container-fullscreen {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: $liverpool-neutral-white;
  font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

// ============================================================================
// MODAL HEADER
// ============================================================================

.modal-header-fullscreen {
  flex-shrink: 0;
  background: linear-gradient(135deg, $liverpool-blue 0%, darken($liverpool-blue, 5%) 100%);
  color: $liverpool-neutral-white;
  padding: $liverpool-space-4 $liverpool-space-6;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: $liverpool-shadow-md;
}

.modal-header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 100%;
}

.modal-header-titles {
  display: flex;
  flex-direction: column;
  gap: $liverpool-space-1;
}

.modal-header-title {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  letter-spacing: -0.02em;
  color: $liverpool-neutral-white;
}

.modal-header-subtitle {
  font-size: 14px;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.8);
}

.modal-header-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: $liverpool-radius-sm;
  color: $liverpool-neutral-white;
  cursor: pointer;
  transition: all 0.2s ease;

  &:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
    transform: scale(1.05);
  }

  &:active {
    transform: scale(0.95);
  }
}

// ============================================================================
// MODAL BODY
// ============================================================================

.modal-body-fullscreen {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  padding: $liverpool-space-4;
}

// ============================================================================
// MODAL FOOTER
// ============================================================================

.modal-footer-fullscreen {
  flex-shrink: 0;
  background: $liverpool-neutral-white;
  border-top: 1px solid $liverpool-neutral-200;
  padding: $liverpool-space-4 $liverpool-space-6;
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.04);
}

.modal-footer-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: $liverpool-space-4;
}

// ============================================================================
// THREE-COLUMN GRID LAYOUT
// ============================================================================

.studio-editor-fullscreen {
  display: grid;
  grid-template-columns: 250px 1fr 300px;
  gap: $liverpool-space-4;
  height: 100%;
  max-height: 100%;
}

// Left Column - Event List
.studio-column-left {
  display: flex;
  flex-direction: column;
  gap: $liverpool-space-3;
  overflow-y: auto;
  overflow-x: hidden;
}

// Center Column - Waveform + Canvas
.studio-column-center {
  display: flex;
  flex-direction: column;
  gap: $liverpool-space-4;
  min-height: 0;
}

// Right Column - Properties
.studio-column-right {
  display: flex;
  flex-direction: column;
  gap: $liverpool-space-3;
  overflow-y: auto;
  overflow-x: hidden;
}

// ============================================================================
// BEAUTIFUL CARD COMPONENTS
// ============================================================================

.studio-card {
  background: $liverpool-neutral-white;
  border-radius: $liverpool-radius-md;
  box-shadow: $liverpool-shadow-sm;
  padding: $liverpool-space-4;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  &:hover {
    box-shadow: $liverpool-shadow-md;
  }
}

.studio-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: $liverpool-space-3;
  padding-bottom: $liverpool-space-3;
  border-bottom: 1px solid $liverpool-neutral-100;
}

.studio-card-title {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: $liverpool-neutral-900;
}

.studio-card-body {
  display: flex;
  flex-direction: column;
  gap: $liverpool-space-3;
}

// ============================================================================
// EVENT LIST CARDS
// ============================================================================

.event-card {
  background: $liverpool-neutral-white;
  border: 1px solid $liverpool-neutral-200;
  border-radius: $liverpool-radius-sm;
  padding: $liverpool-space-3;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;

  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background: transparent;
    border-radius: $liverpool-radius-sm 0 0 $liverpool-radius-sm;
    transition: background 0.2s ease;
  }

  &:hover {
    box-shadow: $liverpool-shadow-md;
    transform: translateY(-2px);
    border-color: $liverpool-blue-light;
  }

  &.selected {
    border-color: $liverpool-blue;
    background: lighten($liverpool-blue, 48%);

    &::before {
      background: $liverpool-blue;
    }
  }
}

.event-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: $liverpool-space-2;
}

.event-card-name {
  font-weight: 600;
  font-size: 14px;
  color: $liverpool-neutral-900;
}

.event-card-type {
  display: inline-flex;
  align-items: center;
  gap: $liverpool-space-1;
  padding: 2px 8px;
  background: $liverpool-neutral-100;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
  color: $liverpool-neutral-600;
}

.event-card-time {
  font-size: 12px;
  color: $liverpool-neutral-500;
  font-family: 'SF Mono', Monaco, Consolas, monospace;
}

// ============================================================================
// WAVEFORM PANEL
// ============================================================================

.waveform-panel {
  background: $liverpool-neutral-white;
  border-radius: $liverpool-radius-md;
  box-shadow: $liverpool-shadow-sm;
  padding: $liverpool-space-4;
  height: 30%;
  min-height: 200px;
  display: flex;
  flex-direction: column;
}

// ============================================================================
// CANVAS PANEL
// ============================================================================

.canvas-panel {
  background: $liverpool-neutral-white;
  border-radius: $liverpool-radius-md;
  box-shadow: $liverpool-shadow-sm;
  padding: $liverpool-space-4;
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

// ============================================================================
// PROPERTIES PANEL
// ============================================================================

.properties-panel {
  background: $liverpool-neutral-white;
  border-radius: $liverpool-radius-md;
  box-shadow: $liverpool-shadow-sm;
  padding: $liverpool-space-4;
}

.properties-section {
  margin-bottom: $liverpool-space-4;

  &:last-child {
    margin-bottom: 0;
  }
}

.properties-label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: $liverpool-neutral-900;
  margin-bottom: $liverpool-space-2;
}

// ============================================================================
// SMOOTH ANIMATIONS
// ============================================================================

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.fade-enter {
  animation: fadeIn 0.3s ease;
}

.slide-enter {
  animation: slideInRight 0.3s ease;
}

// ============================================================================
// SCROLLBAR STYLING
// ============================================================================

.studio-column-left,
.studio-column-right {
  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: $liverpool-neutral-200;
    border-radius: 4px;

    &:hover {
      background: $liverpool-neutral-500;
    }
  }
}

// ============================================================================
// RESPONSIVE BEHAVIOR
// ============================================================================

@media (max-width: 1366px) {
  .studio-editor-fullscreen {
    grid-template-columns: 220px 1fr 280px;
  }
}

@media (max-width: 1200px) {
  .studio-editor-fullscreen {
    grid-template-columns: 200px 1fr 260px;
  }
}

// ============================================================================
// OPENEDX MODAL OVERRIDE - Fullscreen for Timeline Presentation
// ============================================================================
// Purpose: Maintain fullscreen modal (98vw × 98vh) for timeline editor
// Context: This overrides the Liverpool theme's modal sizing to ensure
//          timeline presentation always gets maximum editing space
// Date: 2025-11-28
// ============================================================================

// Override modal size to fullscreen for timeline presentation
// Note: Modal exists in iframe context, so no need for .wrapper or [class*="view-"] prefix
.modal-type-timeline_presentation.modal-window.modal-editor {
  // Fullscreen dimensions with small margins
  width: 98vw !important;
  height: 98vh !important;
  max-width: none !important;
  max-height: none !important;

  // CRITICAL: Override JavaScript inline styles (top, left) for proper centering
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  margin: 0 !important;

  // Liverpool design system styling
  box-shadow: 0 24px 48px 0 rgba(0, 0, 0, 0.22) !important;  // liverpool-shadow-xl
  border-radius: 20px !important;  // liverpool-radius-lg

  // Flexbox layout for proper content stretching
  display: flex !important;
  flex-direction: column !important;
}

// Inner wrapper also needs flexbox (critical for proper layout)
[class*="view-"] .wrapper .modal-type-timeline_presentation.modal-window.modal-editor > div {
  display: flex !important;
  flex-direction: column !important;
  flex: 1 1 auto !important;
  min-height: 0 !important;
}

// Edit-xblock-modal container - fill 100% height to eliminate gap
[class*="view-"] .wrapper .modal-type-timeline_presentation .edit-xblock-modal {
  display: flex !important;
  flex-direction: column !important;
  flex: 1 1 100% !important;  // Use flex instead of height in flexbox context
  min-height: 0 !important;
}

// CRITICAL: Override the max-height restriction on modal-content
// This overrides: [class*="view-"] .modal-lg.modal-editor .edit-xblock-modal .modal-content { max-height: calc(100vh - 144px); }
[class*="view-"] .wrapper .modal-type-timeline_presentation .edit-xblock-modal .modal-content {
  max-height: none !important;
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
}

// Modal header - hidden for fullscreen editor
[class*="view-"] .wrapper .modal-type-timeline_presentation .edit-xblock-modal .modal-header {
  display: none !important;
}

// Modal content - fill entire modal (no header/footer)
[class*="view-"] .wrapper .modal-type-timeline_presentation .edit-xblock-modal .modal-content {
  // Take full height since header and footer are hidden
  flex: 1 1 100% !important;
  height: 100% !important;

  // CRITICAL: min-height 0 enables scrolling in flexbox
  min-height: 0 !important;

  // Scrolling behavior
  overflow-y: auto !important;
  overflow-x: hidden !important;
  scroll-behavior: smooth !important;

  // Remove padding to maximize space
  padding: 0 !important;

  // Background
  background-color: #ffffff !important;  // liverpool-neutral-white
}

// Modal actions - hidden for fullscreen editor (must override inline style)
[class*="view-"] .wrapper .modal-type-timeline_presentation .edit-xblock-modal .modal-actions {
  display: none !important;
}

// Responsive: Tablet
@media (max-width: 1024px) {
  [class*="view-"] .wrapper .modal-type-timeline_presentation.modal-window.modal-editor {
    width: 96vw !important;
    height: 96vh !important;
    margin: 2vh auto !important;
  }
}

// Responsive: Mobile (fullscreen with no margins)
@media (max-width: 768px) {
  [class*="view-"] .wrapper .modal-type-timeline_presentation.modal-window.modal-editor {
    width: 100vw !important;
    height: 100vh !important;
    margin: 0 !important;
    border-radius: 0 !important;
  }
}

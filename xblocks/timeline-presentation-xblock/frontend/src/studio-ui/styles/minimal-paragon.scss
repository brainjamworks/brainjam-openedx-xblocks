/**
 * ARCHITECTURAL: XBlock structural styles only
 *
 * Paragon CSS is loaded from CDN at runtime (via Python fragment)
 * This file contains ONLY XBlock-specific layout and structural styles
 */

// Import shared Liverpool design tokens
@import '../../../../../../shared-styles/styles/liverpool-shared-tokens';

// IMPLEMENTATION: Your custom studio view styles below
.timeline-presentation-studio-view {
  // Add your XBlock-specific editor styles here
}

// ============================================================================
// WAVEFORM TIMELINE COMPONENT STYLES
// ============================================================================

.waveform-timeline {
  width: 100%;

  .waveform-timeline-header {
    h6 {
      font-family: $liverpool-font-primary;
      font-weight: $liverpool-font-weight-semibold;
      color: $liverpool-text-primary;
      font-size: $liverpool-font-size-base;
      margin: 0;
    }

    .text-muted {
      color: $liverpool-text-muted !important;
      font-size: $liverpool-font-size-sm;
    }
  }

  .waveform-container {
    border: 1px solid $liverpool-border-default !important;
    border-radius: $liverpool-radius-sm !important;
    background-color: $liverpool-bg-subtle !important;
    transition: $liverpool-transition-base;

    &:hover {
      border-color: $liverpool-blue-300 !important;
    }

    // WaveSurfer cursor styling
    wave {
      cursor: crosshair !important;
    }

    // Region marker styling
    [data-id^="wavesurfer"] {
      cursor: move !important;

      &:hover {
        opacity: 0.8;
      }
    }
  }

  .waveform-legend {
    padding: $liverpool-space-3 0;
    font-family: $liverpool-font-primary;

    .small {
      font-size: $liverpool-font-size-sm;
      color: $liverpool-text-secondary;
    }
  }

  .text-center.small.text-muted {
    font-size: $liverpool-font-size-xs;
    color: $liverpool-text-muted !important;
    padding: $liverpool-space-2 0;
  }
}

// ============================================================================
// WAVESURFER PLUGIN OVERRIDES
// ============================================================================

// Override WaveSurfer default styles with Liverpool theme
[data-id^="wavesurfer"] {
  // Region markers
  region {
    border-left: 3px solid rgba($liverpool-blue, 0.8) !important;
    transition: all $liverpool-duration-fast $liverpool-easing-out;

    &:hover {
      border-left-width: 4px !important;
      opacity: 0.9 !important;
    }
  }

  // Region content (element type indicator)
  region-content {
    font-family: $liverpool-font-primary;
    font-weight: $liverpool-font-weight-bold;
    font-size: $liverpool-font-size-xs;
    color: $liverpool-neutral-white;
    background-color: rgba($liverpool-blue, 0.9);
    padding: 2px 6px;
    border-radius: 3px;
    pointer-events: none;
    user-select: none;
  }
}

// Waveform cursor styling
wavesurfer cursor {
  border-right: 2px solid $liverpool-pink !important;
  box-shadow: 0 0 8px rgba($liverpool-pink, 0.4);
}

// Progress color override (if needed)
wavesurfer wave canvas {
  // Additional canvas styling if needed
}

// ============================================================================
// DRAWING TOOLBAR COMPONENT STYLES
// ============================================================================

.drawing-toolbar {
  padding: $liverpool-space-4;
  background-color: $liverpool-neutral-white;
  border: 1px solid $liverpool-border-default;
  border-radius: $liverpool-radius-sm;
  margin-bottom: $liverpool-space-4;

  .drawing-toolbar-modes {
    .btn-group {
      display: flex;
      gap: 2px;

      .drawing-toolbar-mode-btn {
        font-family: $liverpool-font-primary;
        font-weight: $liverpool-font-weight-medium;
        font-size: $liverpool-font-size-sm;
        border-radius: $liverpool-radius-xs !important;
        padding: $liverpool-space-2 $liverpool-space-3;
        transition: $liverpool-transition-fast;

        // Active state (selected mode)
        &.btn-primary {
          background: $liverpool-btn-primary-bg;
          border-color: $liverpool-btn-primary-bg;
          color: $liverpool-btn-primary-color;
          box-shadow: $liverpool-shadow-sm;

          &:hover {
            background: $liverpool-btn-primary-bg-hover;
            border-color: $liverpool-btn-primary-bg-hover;
            box-shadow: $liverpool-shadow-md;
          }
        }

        // Inactive state
        &.btn-outline-primary {
          background: transparent;
          border-color: $liverpool-blue-300;
          color: $liverpool-blue;

          &:hover {
            background: $liverpool-blue-100;
            border-color: $liverpool-blue;
          }
        }

        // Icon spacing
        svg {
          margin-right: $liverpool-space-1;
        }
      }
    }
  }

  .drawing-toolbar-divider {
    width: 1px;
    height: 38px;
    background-color: $liverpool-border-default;
    margin: 0 $liverpool-space-3;
  }

  .drawing-toolbar-color,
  .drawing-toolbar-thickness {
    .form-label {
      font-family: $liverpool-font-primary;
      font-weight: $liverpool-font-weight-semibold;
      color: $liverpool-text-secondary;
      font-size: $liverpool-font-size-xs;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: $liverpool-space-1;
    }

    .form-control {
      font-family: $liverpool-font-primary;
      font-size: $liverpool-font-size-sm;
      border: $liverpool-input-border;
      border-radius: $liverpool-input-border-radius;
      transition: $liverpool-transition-fast;

      &:focus {
        border-color: $liverpool-border-focus;
        box-shadow: $liverpool-input-shadow-focus;
      }

      // Color input specific
      &[type="color"] {
        padding: 2px;
        border-radius: $liverpool-radius-xs;

        &::-webkit-color-swatch-wrapper {
          padding: 2px;
        }

        &::-webkit-color-swatch {
          border: none;
          border-radius: 2px;
        }
      }

      // Range slider specific
      &[type="range"] {
        padding: 0;

        &::-webkit-slider-thumb {
          background: $liverpool-blue;
          border: none;
          cursor: pointer;

          &:hover {
            background: $liverpool-blue-dark;
          }
        }

        &::-moz-range-thumb {
          background: $liverpool-blue;
          border: none;
          cursor: pointer;

          &:hover {
            background: $liverpool-blue-dark;
          }
        }
      }
    }
  }

  // Mobile responsiveness
  @media (max-width: 768px) {
    padding: $liverpool-space-3;

    .d-flex {
      flex-wrap: wrap;
      gap: $liverpool-space-3 !important;
    }

    .drawing-toolbar-modes {
      width: 100%;

      .btn-group {
        width: 100%;
        flex-wrap: wrap;
      }
    }

    .drawing-toolbar-divider {
      display: none;
    }

    .drawing-toolbar-color,
    .drawing-toolbar-thickness {
      width: 100%;
    }
  }
}

// ============================================================================
// VISUAL EDITOR COMPONENT STYLES
// ============================================================================

.visual-editor-container {
  position: relative;
  border: 1px solid $liverpool-border-default;
  border-radius: $liverpool-radius-sm;
  overflow: auto; // Allow scrolling for large images
  max-height: 800px; // Constrain height to enable scrolling
  background-color: $liverpool-neutral-white;

  // Cursor styles based on drawing mode
  &.mode-select {
    cursor: default;
  }

  &.mode-text {
    cursor: text;
  }

  &.mode-line,
  &.mode-arrow,
  &.mode-circle,
  &.mode-rectangle {
    cursor: crosshair;
  }

  // Konva canvas styling
  canvas {
    display: block;
    pointer-events: auto; // Ensure canvas receives mouse events
  }
}
